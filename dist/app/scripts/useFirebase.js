async function getDocumentsOrderedByField(e){try{var t=await e.orderBy("point","desc").get();if(t.empty)return console.log("No matching documents."),[];let o=[];return t.forEach(e=>{o.push({id:e.id,data:e.data()})}),o}catch(e){return console.error("Error retrieving documents: ",e),[]}}async function updateIfGreater(e,n,a,r){try{await e.runTransaction(async e=>{var o=await e.get(n);if(!o.exists)throw new Error("Document does not exist!");var t=[o.data().game1||0,o.data().game2||0,o.data().game3||0],o=(t.sort(function(e,o){return o-e}),o.data()[a]||0);o<r?(e.update(n,{[a]:r,maior:t[0]<r?r:t[0]}),console.log("Field updated because the new value is greater.")):console.log("Field not updated because the new value is not greater.")})}catch(e){console.error("Transaction failed: ",e)}}function addOrUpdateDocument(o,t){try{o.get().then(e=>{e.exists?(console.log("update",o),o.update({...t}).then(()=>{console.log("Document successfully update!")}).catch(e=>{console.error("Error update: ",e)})):(console.log("set",o),o.set({...t}).then(()=>{console.log("Document successfully written!")}).catch(e=>{console.error("Error writing document: ",e)}))}).catch(e=>{console.log("Error set:",e)})}catch(e){console.error("Erro ao adicionar ou atualizar documento: ",e)}}function updateDocumentStatus(e,o){try{e.update({desativado:o.desativado}).then(()=>{console.log("Document successfully update Desativo!")}).catch(e=>{console.error("Error update Desativo: ",e)})}catch(e){console.error("Erro ao adicionar ou atualizar documento: ",e)}}function listenToUpdates(e,o){let t=!0;e.onSnapshot(e=>{t?t=!1:e.docChanges().forEach(e=>{"added"===e.type&&(console.log("New document: ",e.doc.data()),o(e)),"modified"===e.type&&(console.log("Modified document: ",e.doc.data()),o(e))})},e=>{console.log("Encountered error: "+e)})}function deleteDocument(e,o){e.delete().then(()=>{console.log("Documento deletado com sucesso!"),o()}).catch(e=>{console.error("Erro ao deletar o documento: ",e)})}window.firebaseConfig={apiKey:"AIzaSyABeSs24iG5DaXYqe4hJIKBhBkiqdfC7og",authDomain:"astrazeneca-csq.firebaseapp.com",projectId:"astrazeneca-csq",storageBucket:"astrazeneca-csq.firebasestorage.app",messagingSenderId:"821833803001",appId:"1:821833803001:web:85bba4ba444c197ac32e28",measurementId:"G-KVR6EY12L7"},window.initFirebase=!1,$(document).ready(function(){var e;window.initFirebase||(e=firebase.initializeApp(window.firebaseConfig),window.db=e.firestore(),window.collectionDB=window.db.collection("usuarios"),window.initFirebase=!0)}),bridge.handlerFormDB=function(e){addOrUpdateDocument(window.collectionDB.doc(e.email),e)},bridge.handlerGameDB=function(e,o,t){e=window.collectionDB.doc(e);updateIfGreater(window.db,e,o,t)},bridge.listRankingDB=function(o){getDocumentsOrderedByField(window.collectionDB).then(e=>{console.log("Documents ordered by field in descending order:"),o(e)}).catch(e=>{console.error("Error in getDocumentsOrderedByField: ",e)})},bridge.handlerSnapshotFormDB=function(e){listenToUpdates(window.collectionDB,e)},bridge.handlerControlStatusUser=function(e,o){console.log(e),deleteDocument(window.collectionDB.doc(e.email),o)};
//# sourceMappingURL=useFirebase.js.map
